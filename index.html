<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>J&K Career Navigator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .container {
            max-width: 1280px;
        }
        .card {
            background-color: white;
            border-radius: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background-color: #1d4ed8;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            transition: background-color 0.2s, transform 0.2s;
        }
        .btn-primary:hover {
            background-color: #1e40af;
            transform: scale(1.05);
        }
        .btn-secondary {
            background-color: #e5e7eb;
            color: #1f2937;
        }
        .btn-secondary:hover {
            background-color: #d1d5db;
        }
        .nav-button.active {
            background-color: #1d4ed8;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .quiz-option {
            background-color: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s, transform 0.2s;
        }
        .quiz-option:hover {
            transform: translateY(-3px);
            border-color: #93c5fd;
        }
        .quiz-option.selected {
            background-color: #dbeafe;
            border-color: #3b82f6;
            font-weight: 600;
        }
        .modal {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        /* Custom scrollbar for better look */
        .overflow-y-auto::-webkit-scrollbar {
            width: 8px;
        }
        .overflow-y-auto::-webkit-scrollbar-track {
            background: #e5e7eb;
            border-radius: 4px;
        }
        .overflow-y-auto::-webkit-scrollbar-thumb {
            background-color: #9ca3af;
            border-radius: 4px;
        }
        details > summary {
            list-style: none;
            cursor: pointer;
            font-weight: 600;
            padding: 1rem;
            background-color: #f9fafb;
            border-radius: 0.75rem;
            transition: background-color 0.2s;
        }
        details > summary:hover {
            background-color: #f3f4f6;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details[open] > summary {
            background-color: #eff6ff;
            color: #1d4ed8;
        }
        details[open] > summary::after {
            content: "−";
            transform: rotate(180deg);
        }
        details:not([open]) > summary::after {
            content: "+";
        }
        details > summary::after {
            font-family: 'Inter', sans-serif;
            margin-left: 0.5rem;
            float: right;
            font-size: 1.5rem;
            line-height: 1;
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div id="app" class="container mx-auto">
        <!-- Timeline Notification Popup -->
        <div id="timeline-notification" class="fixed top-4 right-4 z-50 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 shadow-lg rounded-r-lg transform translate-x-full transition-transform duration-500 ease-in-out" role="alert">
            <p class="font-bold">Timeline Alert</p>
            <p id="timeline-message">Upcoming deadlines are near!</p>
        </div>

        <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-bold text-gray-900 leading-tight">J&K Career Navigator</h1>
            <p class="mt-2 text-xl text-gray-600">Your path from confusion to clarity</p>
        </header>
        
        <!-- Navigation Bar -->
        <nav class="flex justify-center space-x-2 sm:space-x-4 p-2 bg-white rounded-full shadow-md mb-8">
            <button id="nav-home" class="nav-button py-2 px-4 rounded-full font-semibold text-sm sm:text-base transition-colors hover:bg-gray-200">Home</button>
            <button id="nav-quiz" class="nav-button py-2 px-4 rounded-full font-semibold text-sm sm:text-base transition-colors hover:bg-gray-200">Career Quest</button>
            <button id="nav-colleges" class="nav-button py-2 px-4 rounded-full font-semibold text-sm sm:text-base transition-colors hover:bg-gray-200">Nearby Colleges</button>
            <button id="nav-map" class="nav-button py-2 px-4 rounded-full font-semibold text-sm sm:text-base transition-colors hover:bg-gray-200">Career Maps</button>
        </nav>

        <div id="content-area">
            
            <!-- Home Section -->
            <div id="section-home" class="card">
                <h2 class="text-3xl font-bold text-blue-800 mb-4">Welcome to Your Career Journey</h2>
                <p class="text-gray-700 mb-6">Start your journey to a purposeful career by taking our interactive "Career Quest" quiz. Discover your strengths and interests to receive a personalized dashboard with career maps, college suggestions, and more!</p>
                <button id="start-quiz-btn" class="btn-primary">Start the Career Quest</button>
                
                <div id="my-applications" class="mt-8 pt-8 border-t border-gray-200">
                    <h3 class="text-2xl font-bold mb-4">My Application Timeline</h3>
                    <div id="applications-list" class="space-y-4">
                        <p class="text-gray-500">Add colleges from the "Nearby Colleges" section to track your applications here.</p>
                    </div>
                </div>
            </div>
            
            <!-- Quiz Section -->
            <div id="section-quiz" class="card hidden">
                <h2 class="text-3xl font-bold text-blue-800 mb-6">Career Quest Quiz</h2>
                
                <div id="quiz-container">
                    <!-- Quiz questions will be injected here -->
                </div>
                
                <div id="quiz-completion" class="text-center p-8 hidden">
                    <h3 class="text-2xl font-bold mb-4">You've completed the quiz!</h3>
                    <p class="text-gray-700 mb-6">Ready to see your personalized career recommendations?</p>
                    <button id="show-results-btn" class="btn-primary">Show My Results</button>
                </div>

                <div id="quiz-results-display" class="mt-8 hidden">
                    <h3 class="text-2xl font-bold mb-4">Your Personalized Dashboard</h3>
                    <div id="quiz-result-card" class="card p-6 bg-blue-50 border-blue-200 border-2 mb-6">
                        <p class="text-xl font-semibold">Your Primary Inclination: <span id="quiz-result-text" class="text-blue-600 font-bold"></span></p>
                        <p id="quiz-result-description" class="mt-2 text-gray-700"></p>
                    </div>

                    <div id="recommended-career-maps-container" class="mt-8">
                        <h4 class="text-xl font-semibold text-gray-800 mb-4">Recommended Career Maps</h4>
                        <div id="recommended-career-maps" class="space-y-4"></div>
                    </div>

                    <div id="recommended-colleges-container" class="mt-8">
                        <h4 class="text-xl font-semibold text-gray-800 mb-4">Recommended Colleges</h4>
                        <div id="recommended-colleges" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
                    </div>
                    
                    <h4 class="text-xl font-semibold text-gray-800 mt-8 mb-4">Career Spotlights: Local Heroes</h4>
                    <div id="career-spotlights" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>

                    <div id="startup-hub" class="mt-8 pt-8 border-t border-gray-200 hidden">
                        <h4 class="text-2xl font-bold text-green-700 mb-4">The Startup Resource Hub</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <a href="http://jkedi.org/" target="_blank" rel="noopener noreferrer" class="card p-6 flex flex-col items-start hover:shadow-lg transition-shadow">
                                <h5 class="text-lg font-bold text-blue-700">J&K Entrepreneurship Development Institute (JKEDI)</h5>
                                <p class="text-sm text-gray-600 mt-2">Get training and support to start your business.</p>
                            </a>
                            <a href="https://www.startupindia.gov.in/" target="_blank" rel="noopener noreferrer" class="card p-6 flex flex-col items-start hover:shadow-lg transition-shadow">
                                <h5 class="text-lg font-bold text-blue-700">Startup India & MSME Loan Schemes</h5>
                                <p class="text-sm text-gray-600 mt-2">Explore government schemes and financial aid for new ventures.</p>
                            </a>
                        </div>
                    </div>

                    <div class="space-x-4 flex justify-center mt-12">
                        <button id="retake-quiz-btn" class="btn-primary btn-secondary">Retake Quiz</button>
                    </div>
                </div>
            </div>

            <!-- Colleges Section -->
            <div id="section-colleges" class="card hidden">
                <h2 class="text-3xl font-bold text-blue-800 mb-6">Find Your College</h2>
                <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6">
                    <button id="get-location-btn" class="btn-primary">Find Nearby Colleges</button>
                    <p class="font-semibold text-gray-700 hidden sm:block">or</p>
                    <select id="location-filter" class="w-full sm:w-auto p-3 border rounded-lg shadow-sm">
                        <option value="All Locations">All Locations</option>
                        <option value="Srinagar">Srinagar</option>
                        <option value="Jammu">Jammu</option>
                        <option value="Anantnag">Anantnag</option>
                        <option value="Awantipora">Awantipora</option>
                        <option value="Baramulla">Baramulla</option>
                        <option value="Pulwama">Pulwama</option>
                        <option value="Kathua">Kathua</option>
                        <option value="Sopore">Sopore</option>
                        <option value="Katra">Katra</option>
                        <option value="Rajouri">Rajouri</option>
                    </select>
                </div>
                <div id="compare-colleges-bar" class="hidden text-center my-4">
                    <button id="compare-colleges-btn" class="btn-primary">Compare Selected</button>
                </div>
                
                <div id="college-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Colleges will be injected here -->
                </div>
            </div>

            <!-- Career Map Section -->
            <div id="section-map" class="card hidden">
                <h2 class="text-3xl font-bold text-blue-800 mb-6">Visual Career Maps</h2>
                <p class="text-gray-700 mb-6">Follow a step-by-step roadmap for your desired career, including skills to learn, relevant courses, and scholarship opportunities.</p>
                <div class="space-y-8" id="career-paths-container">
                    <!-- Career maps will be injected here -->
                </div>
            </div>
        </div>

        <!-- College Comparison Modal -->
        <div id="compare-modal" class="modal fixed inset-0 flex items-center justify-center p-4 z-50 hidden">
            <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-4xl max-h-full overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold">Compare Colleges</h3>
                    <button class="text-gray-400 hover:text-gray-600 text-3xl font-bold" onclick="hideModal('compare-modal')">&times;</button>
                </div>
                <div id="modal-compare-content" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                    <!-- Comparison content will be injected here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Core Application Logic ---
        
        // State Management
        let currentView = 'home';
        let currentQuestionIndex = 0;
        let quizAnswers = {};
        let userLocation = null; // Let's not default location
        let collegesToCompare = new Set();
        let myApplications = [];
        
        // Data Definitions
        const quizData = [
            {
                question: "When faced with a problem, what's your first instinct?",
                options: [
                    { text: "Break it down and analyze the details.", category: "Technical" },
                    { text: "Look for a new, creative way to solve it.", category: "Creative" },
                    { text: "Collaborate with others to find a solution.", category: "Social" },
                    { text: "Take charge and lead the effort to fix it.", category: "Entrepreneurial" }
                ]
            },
            {
                question: "What kind of projects do you enjoy most?",
                options: [
                    { text: "Building something practical and functional.", category: "Technical" },
                    { text: "Creating a work of art or design.", category: "Creative" },
                    { text: "Helping people and making a positive impact.", category: "Social" },
                    { text: "Starting something from scratch and seeing it grow.", category: "Entrepreneurial" }
                ]
            },
            {
                question: "Which of these subjects interests you the most?",
                options: [
                    { text: "Physics, Mathematics, and Computer Science.", category: "Technical" },
                    { text: "Literature, Art, and Music.", category: "Creative" },
                    { text: "Psychology, Sociology, and Political Science.", category: "Social" },
                    { text: "Economics, Business, and Marketing.", category: "Entrepreneurial" }
                ]
            },
            {
                question: "What motivates you in a team setting?",
                options: [
                    { text: "Achieving a well-defined goal efficiently.", category: "Technical" },
                    { text: "Contributing a unique, out-of-the-box idea.", category: "Creative" },
                    { text: "Building strong relationships and ensuring harmony.", category: "Social" },
                    { text: "Leading the team and driving towards a vision.", category: "Entrepreneurial" }
                ]
            }
        ];

        const resultDescriptions = {
            "Technical": "You are analytical and enjoy understanding how things work. You're likely skilled in logic, math, and science, and are drawn to careers in engineering, IT, or research.",
            "Creative": "You are imaginative and expressive, with a talent for design, art, and communication. Careers in media, fine arts, writing, or performance might be a great fit for you.",
            "Social": "You are empathetic and community-oriented. You find fulfillment in helping others and contributing to society. Consider careers in education, healthcare, social work, or public service.",
            "Entrepreneurial": "You are a natural leader and visionary, driven to innovate and build. You excel at spotting opportunities and managing projects. A path in business, management, or starting your own venture would suit you well."
        };

        const careerPathData = [
            { category: "Technical", degree: "B.Tech / B.E.", title: "Software Engineer", steps: [{ name: "Foundation in Coding", details: "Learn core programming languages.", skills: ["Java", "Python", "Data Structures"], courses: [{name: "CS50 on edX", url:"https://www.edx.org/course/introduction-computer-science-harvardx-cs50x"}, {name: "FreeCodeCamp", url:"https://www.freecodecamp.org/"}], scholarships: [{name: "Google Scholarships", url: "https://buildyourfuture.withgoogle.com/scholarships"}] }] },
            { category: "Creative", degree: "B.A. Fine Arts", title: "Graphic Designer", steps: [{ name: "Design Fundamentals", details: "Master principles of visual design.", skills: ["Adobe Photoshop", "Illustrator"], courses: [{name: "Canva Design School", url:"https://www.canva.com/designschool/"}, {name:"Coursera UI/UX", url:"https://www.coursera.org/professional-certificates/google-ux-design"}], scholarships: [{name: "Adobe Design Scholarships", url:"https://www.adobe.com/scholarships"}] }] },
            { category: "Social", degree: "B.S.W. (Bachelor of Social Work)", title: "Social Worker", steps: [{ name: "Community Engagement", details: "Gain experience through volunteering and internships.", skills: ["Empathy", "Counseling"], courses: [{name: "Intro to Social Work on Coursera", url:"https://www.coursera.org/learn/social-work"}], scholarships: [{name: "Tata Trust Scholarships", url:"https://www.tatatrusts.org/our-work/education/scholarships"}] }] },
            { category: "Entrepreneurial", degree: "BBA", title: "Startup Founder", steps: [{ name: "Business Acumen", details: "Learn about marketing, finance, and operations.", skills: ["Business Planning", "Networking"], courses: [{name: "Y Combinator Startup School", url:"https://www.ycombinator.com/school"}], scholarships: [{name: "JKEDI Grants", url:"http://jkedi.org/"}] }] },
            { category: "Technical", degree: "B.Sc. Agriculture", title: "Agricultural Scientist", steps: [{ name: "Undergraduate Degree", details: "Complete B.Sc. Agriculture or related degree.", skills: ["Soil Science", "Plant Biology"], courses: [{name: "Intro to Agronomy on Coursera", url:"https://www.coursera.org/courses?query=agronomy"}], scholarships: [{name: "ICAR Scholarships", url:"https://icar.org.in/scholarships"}] }] },
            { category: "Entrepreneurial", degree: "B.Voc / BBA", title: "Digital Marketing Specialist", steps: [{ name: "Basics of Marketing", details: "Learn marketing fundamentals and digital tools.", skills: ["SEO", "Content Creation"], courses: [{name: "Google Digital Garage", url:"https://learndigital.withgoogle.com/digitalgarage/"}, {name: "HubSpot Academy", url:"https://academy.hubspot.com/"}], scholarships: [] }] },
            { category: "Social", degree: "B.A. Political Science / Public Admin", title: "Civil Servant (KAS/IAS)", steps: [{ name: "Build Foundation", details: "Focus on NCERTs and standard books for core subjects.", skills: ["Critical Analysis", "Writing", "General Knowledge"], courses: [{name: "Vision IAS", url:"https://visionias.in/"}, {name:"Unacademy", url:"https://unacademy.com/"}], scholarships: [{name: "Govt. Coaching Schemes", url:"https://socialjustice.gov.in/schemes/36"}] }] },
            { category: "Technical", degree: "MBBS (after 10+2 Science)", title: "Doctor", steps: [{ name: "NEET Preparation", details: "Prepare and qualify the National Eligibility cum Entrance Test (NEET-UG).", skills: ["Biology", "Chemistry", "Physics", "Problem Solving"], courses: [{name: "Aakash Institute", url:"https://www.aakash.ac.in/"}, {name:"Allen Career Institute", url:"https://www.allen.ac.in/"}], scholarships: [{name: "National Scholarship Portal", url:"https://scholarships.gov.in/"}] }] },
        ];

        const collegeData = [
            // Jammu Division
            { id: 1, name: "University of Jammu", location: "Jammu", fees: "₹30,000", courses: ["B.Sc.", "B.A.", "B.Tech.", "BBA"], facilities: ["Library", "Hostel", "Labs", "Wi-Fi"], lat: 32.7357, lon: 74.8698, category: ["Technical", "Social", "Creative"] },
            { id: 6, name: "IIT Jammu", location: "Jammu", fees: "₹2,15,000", courses: ["B.Tech.", "M.Tech."], facilities: ["Advanced Labs", "Hostel", "Sports Complex"], lat: 32.6885, lon: 74.8835, category: ["Technical"] },
            { id: 7, name: "IIM Jammu", location: "Jammu", fees: "₹17,00,000", courses: ["MBA", "PGDM"], facilities: ["Modern Campus", "Library", "Hostel"], lat: 32.7766, lon: 74.8726, category: ["Entrepreneurial"] },
            { id: 8, name: "Govt. Medical College, Jammu", location: "Jammu", fees: "₹50,000", courses: ["MBBS", "MD"], facilities: ["Hospital", "Labs", "Hostel"], lat: 32.7169, lon: 74.8649, category: ["Technical", "Social"] },
            { id: 9, name: "Govt. College of Engineering & Technology, Jammu", location: "Jammu", fees: "₹45,000", courses: ["B.E.", "B.Tech."], facilities: ["Workshops", "Library", "Labs"], lat: 32.7876, lon: 74.8605, category: ["Technical"] },
            { id: 10, name: "Shri Mata Vaishno Devi University", location: "Katra", fees: "₹1,80,000", courses: ["B.Tech.", "MBA", "M.Sc."], facilities: ["Residential Campus", "Labs", "Library"], lat: 32.9348, lon: 74.9511, category: ["Technical", "Entrepreneurial"] },
            { id: 11, name: "Baba Ghulam Shah Badshah University", location: "Rajouri", fees: "₹40,000", courses: ["B.Tech.", "MCA", "MBA"], facilities: ["Hostel", "Library", "Transport"], lat: 33.4862, lon: 74.3168, category: ["Technical", "Social"] },
            { id: 12, name: "Govt. Degree College, Kathua", location: "Kathua", fees: "₹12,000", courses: ["B.A.", "B.Sc.", "B.Com."], facilities: ["Library", "Sports Ground"], lat: 32.3725, lon: 75.5204, category: ["Social", "Creative"] },
            { id: 13, name: "MIET Jammu", location: "Jammu", fees: "₹90,000", courses: ["B.E.", "MBA", "MCA"], facilities: ["Labs", "Library", "Canteen"], lat: 32.6582, lon: 74.9123, category: ["Technical", "Entrepreneurial"] },
            { id: 14, name: "Cluster University of Jammu", location: "Jammu", fees: "₹20,000", courses: ["Integrated M.A.", "M.Sc."], facilities: ["Multiple Campuses", "Labs"], lat: 32.7303, lon: 74.8708, category: ["Social", "Creative"] },
            { id: 15, name: "Central University of Jammu", location: "Jammu", fees: "₹25,000", courses: ["M.A.", "M.Sc.", "Ph.D."], facilities: ["Campus", "Library", "Hostel"], lat: 32.6288, lon: 74.9989, category: ["Technical", "Social"] },

            // Kashmir Division
            { id: 4, name: "Govt. College for Women, M.A. Road", location: "Srinagar", fees: "₹12,000", courses: ["B.A.", "B.Voc.", "B.A. Fine Arts"], facilities: ["Auditorium", "Library"], lat: 34.0837, lon: 74.7972, category: ["Creative", "Social"] },
            { id: 16, name: "University of Kashmir", location: "Srinagar", fees: "₹25,000", courses: ["M.A.", "M.Sc.", "LL.B."], facilities: ["Campus", "Library", "Naseem Bagh"], lat: 34.1206, lon: 74.8322, category: ["Social", "Creative", "Technical"] },
            { id: 17, name: "NIT Srinagar", location: "Srinagar", fees: "₹1,25,000", courses: ["B.Tech.", "M.Tech."], facilities: ["Labs", "Hostel", "Dal Lake View"], lat: 34.1211, lon: 74.8340, category: ["Technical"] },
            { id: 18, name: "SKIMS Medical College", location: "Srinagar", fees: "₹60,000", courses: ["MBBS"], facilities: ["Hospital", "Advanced Labs"], lat: 34.1504, lon: 74.8030, category: ["Technical", "Social"] },
            { id: 19, name: "SKUAST-Kashmir", location: "Srinagar", fees: "₹35,000", courses: ["B.Sc. Agriculture", "B.V.Sc."], facilities: ["Farms", "Labs", "Hostel"], lat: 34.1446, lon: 74.8306, category: ["Technical"] },
            { id: 2, name: "Govt. Degree College, Baramulla", location: "Baramulla", fees: "₹15,000", courses: ["B.Sc.", "B.Com."], facilities: ["Library", "Sports"], lat: 34.2045, lon: 74.3644, category: ["Technical", "Social"] },
            { id: 3, name: "IUST, Awantipora", location: "Awantipora", fees: "₹25,000", courses: ["B.Tech.", "B.Sc.", "MBA"], facilities: ["Research Labs", "Hostels"], lat: 33.8860, lon: 75.0500, category: ["Technical", "Entrepreneurial"] },
            { id: 5, name: "GDC Boys, Anantnag", location: "Anantnag", fees: "₹10,000", courses: ["B.A.", "B.Sc."], facilities: ["Laboratories", "Hostel"], lat: 33.7317, lon: 75.1539, category: ["Social"] },
            { id: 20, name: "Govt. Medical College, Anantnag", location: "Anantnag", fees: "₹55,000", courses: ["MBBS"], facilities: ["Hospital", "Labs"], lat: 33.7431, lon: 75.1456, category: ["Technical", "Social"] },
            { id: 21, name: "Govt. Degree College, Sopore", location: "Sopore", fees: "₹14,000", courses: ["B.A.", "B.Sc."], facilities: ["Library", "Playground"], lat: 34.2917, lon: 74.4608, category: ["Social"] },
            { id: 22, name: "Amar Singh College, Srinagar", location: "Srinagar", fees: "₹18,000", courses: ["B.A.", "B.Sc.", "B.Com."], facilities: ["Heritage Campus", "Library"], lat: 34.0765, lon: 74.8063, category: ["Social", "Creative"] },
            { id: 23, name: "SP College, Srinagar", location: "Srinagar", fees: "₹17,000", courses: ["B.Sc.", "BCA"], facilities: ["Science Labs", "Library"], lat: 34.0740, lon: 74.8078, category: ["Technical"] },
            { id: 24, name: "Govt. Degree College for Boys, Pulwama", location: "Pulwama", fees: "₹11,000", courses: ["B.A.", "B.Sc."], facilities: ["Library", "Labs"], lat: 33.8732, lon: 74.9192, category: ["Social"] },
            { id: 25, name: "Central University of Kashmir", location: "Ganderbal", fees: "₹22,000", courses: ["Integrated M.Sc.", "M.A."], facilities: ["New Campus", "Hostel"], lat: 34.2256, lon: 74.6980, category: ["Technical", "Social"] },
            { id: 26, name: "Cluster University of Srinagar", location: "Srinagar", fees: "₹21,000", courses: ["Integrated B.A-M.A", "B.Ed."], facilities: ["Constituent Colleges"], lat: 34.0754, lon: 74.8085, category: ["Social", "Creative"] },
            { id: 27, name: "Govt. Medical College, Baramulla", location: "Baramulla", fees: "₹55,000", courses: ["MBBS"], facilities: ["Associated Hospital", "Labs"], lat: 34.1950, lon: 74.3480, category: ["Technical", "Social"] },
            { id: 28, name: "Islamic College of Science and Commerce", location: "Srinagar", fees: "₹20,000", courses: ["B.Sc. IT", "BBA", "B.Com."], facilities: ["Labs", "Library"], lat: 34.0926, lon: 74.7981, category: ["Technical", "Entrepreneurial"] },
            { id: 29, name: "Govt. Degree College, Kupwara", location: "Kupwara", fees: "₹10,000", courses: ["B.A.", "B.Sc."], facilities: ["Library", "Computer Lab"], lat: 34.5269, lon: 74.2605, category: ["Social"] },
            { id: 30, name: "Govt. Degree College, Kulgam", location: "Kulgam", fees: "₹10,000", courses: ["B.A.", "B.Sc."], facilities: ["Library", "Reading Room"], lat: 33.6429, lon: 75.0210, category: ["Social"] }
        ];

        const spotlightData = [
            { name: "Tariq Ahmad Wani", bio: "Agri-tech entrepreneur revolutionizing local farming.", category: "Entrepreneurial" },
            { name: "Mir Muneeb", bio: "Software engineer at a leading tech firm, building global products.", category: "Technical" },
            { name: "Sana Imtiyaz Hussaini", bio: "Home-based baker and founder of a popular local patisserie.", category: "Creative" },
            { name: "Zahoor Ahmad", bio: "Social worker dedicated to empowering underprivileged communities.", category: "Social" }
        ];

        const timelineEvents = [
            { id: 1, name: "SKUAST Admission Application Deadline", date: "2025-10-15" },
            { id: 2, name: "JKEDI Startup Training Registration Ends", date: "2025-11-05" },
            { id: 3, name: "National Scholarship Portal Closes", date: "2025-12-01" },
        ];

        // Element References
        const views = {
            home: document.getElementById('section-home'),
            quiz: document.getElementById('section-quiz'),
            colleges: document.getElementById('section-colleges'),
            map: document.getElementById('section-map')
        };
        const navButtons = {
            home: document.getElementById('nav-home'),
            quiz: document.getElementById('nav-quiz'),
            colleges: document.getElementById('nav-colleges'),
            map: document.getElementById('nav-map')
        };

        const quizContainer = document.getElementById('quiz-container');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const locationFilter = document.getElementById('location-filter');
        const getLocationBtn = document.getElementById('get-location-btn');
        const myApplicationsList = document.getElementById('applications-list');
        const careerPathsContainer = document.getElementById('career-paths-container');
        const collegeList = document.getElementById('college-list');
        const quizResultsDisplay = document.getElementById('quiz-results-display');
        const recommendedCareerMaps = document.getElementById('recommended-career-maps');
        const recommendedColleges = document.getElementById('recommended-colleges');
        const spotlightsContainer = document.getElementById('career-spotlights');
        const startupHub = document.getElementById('startup-hub');
        const quizCompletion = document.getElementById('quiz-completion');
        const compareModal = document.getElementById('compare-modal');
        const showResultsBtn = document.getElementById('show-results-btn');
        const retakeQuizBtn = document.getElementById('retake-quiz-btn');

        // --- Core Functions ---
        
        function navigate(view) {
            currentView = view;
            Object.values(views).forEach(v => v.classList.add('hidden'));
            views[view].classList.remove('hidden');
            Object.values(navButtons).forEach(b => b.classList.remove('active'));
            navButtons[view].classList.add('active');
            window.scrollTo(0, 0);
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            quizAnswers = {};
            quizCompletion.classList.add('hidden');
            quizResultsDisplay.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            renderQuestion();
            navigate('quiz');
        }

        function renderQuestion() {
            const questionData = quizData[currentQuestionIndex];
            quizContainer.innerHTML = `
                <div class="mb-4">
                    <p class="text-xl font-semibold text-gray-800">${currentQuestionIndex + 1}. ${questionData.question}</p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mt-2">
                        <div class="bg-blue-600 h-2.5 rounded-full" style="width: ${((currentQuestionIndex + 1) / quizData.length) * 100}%"></div>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    ${questionData.options.map((opt, i) => `
                        <div class="quiz-option p-4 text-center" onclick="selectOption('${opt.category}', this)">
                            ${opt.text}
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        function selectOption(category, element) {
            quizAnswers[currentQuestionIndex] = category;
            
            // Highlight selected option
            document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');

            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizData.length) {
                    renderQuestion();
                } else {
                    quizContainer.classList.add('hidden');
                    quizCompletion.classList.remove('hidden');
                }
            }, 500); // 0.5-second delay
        }

        function showResults() {
            const counts = {};
            Object.values(quizAnswers).forEach(answer => {
                counts[answer] = (counts[answer] || 0) + 1;
            });

            const primaryCategory = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
            
            quizCompletion.classList.add('hidden');
            quizResultsDisplay.classList.remove('hidden');
            
            document.getElementById('quiz-result-text').innerText = primaryCategory;
            document.getElementById('quiz-result-description').innerText = resultDescriptions[primaryCategory];

            // Render personalized content
            renderRecommendedContent(primaryCategory);
        }

        function renderRecommendedContent(category) {
            // Filter and render career maps
            const filteredMaps = careerPathData.filter(path => path.category === category);
            recommendedCareerMaps.innerHTML = filteredMaps.map(path => createCareerMapHTML(path)).join('');

            // Filter and render colleges
            const filteredColleges = collegeData.filter(college => college.category.includes(category));
            recommendedColleges.innerHTML = filteredColleges.map(college => createCollegeCardHTML(college)).join('');

            // Filter and render spotlights
            const filteredSpotlights = spotlightData.filter(s => s.category === category);
            spotlightsContainer.innerHTML = filteredSpotlights.map(s => `
                <div class="card p-4 text-center">
                    <h5 class="font-bold text-lg text-blue-800">${s.name}</h5>
                    <p class="text-sm text-gray-600">${s.bio}</p>
                </div>
            `).join('');

            // Show startup hub if entrepreneurial
            if (category === 'Entrepreneurial') {
                startupHub.classList.remove('hidden');
            } else {
                startupHub.classList.add('hidden');
            }
        }
        
        function createCareerMapHTML(path) {
            return `
                <details class="bg-white rounded-xl shadow-sm">
                    <summary class="text-lg text-gray-800">${path.degree} <span class="text-blue-600 font-semibold">-> ${path.title}</span></summary>
                    <div class="p-4 border-t">
                        ${path.steps.map(step => `
                            <div class="mb-4">
                                <h4 class="font-semibold text-md">${step.name}</h4>
                                <p class="text-sm text-gray-600">${step.details}</p>
                                <p class="text-sm mt-1"><strong>Skills:</strong> ${step.skills.join(', ')}</p>
                                <p class="text-sm mt-1"><strong>Recommended Courses:</strong> ${step.courses.map(c => `<a href="${c.url}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${c.name}</a>`).join(', ')}</p>
                                <p class="text-sm mt-1"><strong>Scholarships:</strong> ${step.scholarships.length > 0 ? step.scholarships.map(s => `<a href="${s.url}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${s.name}</a>`).join(', ') : 'N/A'}</p>
                            </div>
                        `).join('')}
                    </div>
                </details>
            `;
        }
        
        function renderAllCareerMaps() {
            careerPathsContainer.innerHTML = careerPathData.map(createCareerMapHTML).join('');
        }
        
        function renderColleges(filter = 'All Locations') {
            let filteredColleges = collegeData;
            if (filter !== 'All Locations') {
                filteredColleges = collegeData.filter(c => c.location === filter);
            }

            if (userLocation) {
                filteredColleges.forEach(c => {
                    c.distance = calculateDistance(userLocation.lat, userLocation.lon, c.lat, c.lon);
                });
                filteredColleges.sort((a, b) => a.distance - b.distance);
            }
            
            collegeList.innerHTML = filteredColleges.map(createCollegeCardHTML).join('');
        }

        function createCollegeCardHTML(college) {
            const distanceText = college.distance ? `<p class="text-sm text-green-600 font-semibold">${college.distance.toFixed(1)} km away</p>` : '';
            return `
                <div class="card p-6 flex flex-col justify-between">
                    <div>
                        <h4 class="text-xl font-bold text-blue-800">${college.name}</h4>
                        <p class="text-gray-600 font-semibold">${college.location}</p>
                        ${distanceText}
                        <p class="mt-2"><strong>Courses:</strong> ${college.courses.join(', ')}</p>
                        <p><strong>Facilities:</strong> ${college.facilities.join(', ')}</p>
                        <p><strong>Approx. Fees:</strong> ${college.fees}/year</p>
                    </div>
                    <div class="mt-4 flex items-center justify-between">
                        <button class="btn-primary text-sm py-2 px-4" onclick="addToApplications(${college.id})">Add to Timeline</button>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="compare-checkbox" onchange="toggleCompare(${college.id})" ${collegesToCompare.has(college.id) ? 'checked' : ''}>
                            <span class="text-sm font-semibold">Compare</span>
                        </label>
                    </div>
                </div>
            `;
        }

        function toggleCompare(collegeId) {
            if (collegesToCompare.has(collegeId)) {
                collegesToCompare.delete(collegeId);
            } else {
                collegesToCompare.add(collegeId);
            }
            document.getElementById('compare-colleges-bar').classList.toggle('hidden', collegesToCompare.size < 2);
        }

        function renderComparison() {
            const selectedColleges = collegeData.filter(c => collegesToCompare.has(c.id));
            const content = document.getElementById('modal-compare-content');
            content.innerHTML = selectedColleges.map(c => `
                <div class="border p-4 rounded-lg">
                    <h4 class="text-xl font-bold text-blue-800">${c.name}</h4>
                    <p class="font-semibold">${c.location}</p>
                    <ul class="list-disc list-inside mt-2 space-y-1">
                        <li><strong>Fees:</strong> ${c.fees}/year</li>
                        <li><strong>Courses:</strong> ${c.courses.join(', ')}</li>
                        <li><strong>Facilities:</strong> ${c.facilities.join(', ')}</li>
                    </ul>
                </div>
            `).join('');
            showModal('compare-modal');
        }

        function showModal(id) { document.getElementById(id).classList.remove('hidden'); }
        function hideModal(id) { document.getElementById(id).classList.add('hidden'); }
        
        function getUserLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    userLocation = {
                        lat: position.coords.latitude,
                        lon: position.coords.longitude
                    };
                    renderColleges();
                }, () => {
                    alert("Location access denied. Showing all colleges.");
                    renderColleges();
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }
        
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Radius of the Earth in km
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c;
        }

        function addToApplications(collegeId) {
            const college = collegeData.find(c => c.id === collegeId);
            if (college && !myApplications.find(app => app.id === collegeId)) {
                const deadline = new Date();
                deadline.setDate(deadline.getDate() + 60); // Default 60-day deadline
                myApplications.push({ ...college, deadline: deadline.toISOString().split('T')[0] });
                renderMyApplications();
            }
        }
        
        function renderMyApplications() {
            if (myApplications.length === 0) {
                myApplicationsList.innerHTML = '<p class="text-gray-500">Add colleges to track your applications here.</p>';
                return;
            }
            myApplicationsList.innerHTML = myApplications.map(app => `
                <div class="p-4 bg-gray-50 rounded-lg flex justify-between items-center">
                    <div>
                        <p class="font-bold">${app.name}</p>
                        <p class="text-sm text-gray-600">Deadline: ${app.deadline}</p>
                    </div>
                    <button class="text-red-500 hover:text-red-700 font-semibold" onclick="removeApplication(${app.id})">Remove</button>
                </div>
            `).join('');
        }

        function removeApplication(collegeId) {
            myApplications = myApplications.filter(app => app.id !== collegeId);
            renderMyApplications();
        }
        
        function checkTimeline() {
            const today = new Date();
            const upcoming = timelineEvents.find(event => {
                const eventDate = new Date(event.date);
                const diffDays = (eventDate - today) / (1000 * 60 * 60 * 24);
                return diffDays > 0 && diffDays <= 30; // Within the next 30 days
            });

            if (upcoming) {
                const notification = document.getElementById('timeline-notification');
                document.getElementById('timeline-message').innerText = `${upcoming.name} is approaching on ${upcoming.date}!`;
                notification.classList.remove('translate-x-full');
                setTimeout(() => {
                    notification.classList.add('translate-x-full');
                }, 7000); // Hide after 7 seconds
            }
        }

        // --- Event Listeners and Initialization ---
        window.addEventListener('DOMContentLoaded', () => {
            // Navigation listeners
            navButtons.home.addEventListener('click', () => navigate('home'));
            navButtons.quiz.addEventListener('click', startQuiz);
            navButtons.colleges.addEventListener('click', () => navigate('colleges'));
            navButtons.map.addEventListener('click', () => navigate('map'));
            
            // Button listeners
            startQuizBtn.addEventListener('click', startQuiz);
            showResultsBtn.addEventListener('click', showResults);
            retakeQuizBtn.addEventListener('click', startQuiz);
            getLocationBtn.addEventListener('click', getUserLocation);
            locationFilter.addEventListener('change', (e) => renderColleges(e.target.value));
            document.getElementById('compare-colleges-btn').addEventListener('click', renderComparison);
            
            // Initial setup
            navigate('home');
            renderAllCareerMaps();
            renderColleges();
            renderMyApplications();
            checkTimeline();
        });

    </script>
</body>
</html>


